@functions {
    string IsActive(string controller, string? action = null)
    {
        var c = ViewContext.RouteData.Values["controller"]?.ToString();
        var a = ViewContext.RouteData.Values["action"]?.ToString();
        bool ctrlOk = string.Equals(c, controller, System.StringComparison.OrdinalIgnoreCase);
        bool actOk = action == null || string.Equals(a, action, System.StringComparison.OrdinalIgnoreCase);
        return (ctrlOk && actOk) ? "active" : "";
    }
}

<nav class="navbar navbar-expand-lg navbar-dark shadow-sm sticky-top nav-ha">
    <div class="container">
        <a class="navbar-brand fw-semibold d-flex align-items-center gap-2" asp-controller="Home" asp-action="Index">
            <img src="~/images/HAIANH.png" alt="Hải Anh Trà" class="brand-logo" />
            <span>Hải Anh Trà</span>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain"
                aria-controls="navMain" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navMain">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">
                <li class="nav-item">
                    <a class="nav-link @IsActive("Home", "Index")" asp-controller="Home" asp-action="Index">Trang chủ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @(IsActive("Products", "Index") ?? "")" asp-controller="Products" asp-action="Index" asp-route-type="Tea">Trà</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @(IsActive("Products", "Index") ?? "")" asp-controller="Products" asp-action="Index" asp-route-type="Tool">Dụng cụ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @IsActive("Guides")" asp-controller="Guides" asp-action="Index">Hướng dẫn</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @IsActive("Contact")" asp-controller="Contact" asp-action="Index">Liên hệ</a>
                </li>
            </ul>

            <a class="btn btn-sm ms-lg-3 btn-admin"
               asp-area="Admin" asp-controller="Dashboard" asp-action="Index">Admin</a>
        </div>
    </div>
</nav>
